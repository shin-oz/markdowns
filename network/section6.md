# Ethernet概要
リンク層のプロトコルの一つ
→直接接続された機器間の通信

- LANのデファクトスタンダード
※ルールとして決まってはいないが、事実上の標準のこと
- IEEE 802.3〇〇で規格化されている


# Ethernetの通信方法
アドレスを使い、フレームを相手に送信する
Ethernetフレームのヘッダに自分のアドレスと相手のアドレス等が含まれている

接続されている機器すべてに送信し、受信側は自分宛てでなければ破棄する
→破棄されているため、通信自体としてはユニキャスト

マルチキャスト・エニキャストの場合は、特別なアドレスを使用する


# MACアドレス
Ethernetで使用されるアドレス(Media Access Control)
48bitの数字
前半24bitは、違うメーカーが同じアドレスを使用しないよう、IEEEが管理している（OUI）

FF-FF-FF-FF-FF-FFはBroadcast


# Ethernetフレーム
二つの規格がある
- DIX：Ethernetを開発した企業によるフレーム（こちらが広く使われている）
- IEEE 802.3

DIX
宛先MACアドレス（6byte） 送信先MACアドレス(6byte)　タイプ(2byte) データ(46~1500)　FCS(4)
IEEE 802.3
宛先MACアドレス（6byte） 送信先MACアドレス(6byte)　長さ(2byte)　LLC(3) SNAP(5) データ(38~1492)　FCS(4)

- タイプ/長さの比較について：1500byte以下であれば長さになる→IEEE802.3になる
- LLC：ネットワーク層との制御用管理情報のこと
- SNAP：上位層で使われるプロトコル情報のこと
- データ：可変長なため、一定でない

プロトコルタイプ
タイプフィールドには、上位層で使われるプロトコル情報
- IP:0X0800
- ARP:0X0806
※0Xは16進数ということ


# プリアンブルとIFG
プリアンブル：Ethernetフレームの始まりを閉める
→8オクテット(8byteということ)←byteは正確には8bitでないことがあるが、オクテットは正確に1byte=8bitになる
7オクテットまでは1と0が交互に、8オクテット目の最後は11になる(SFD:Start Frame Delimiter)

IFG(Inter Frame Gap)
96bit分の送信にかかる時間：フレームとフレームを送信する間にある待ち時間
→Ethernet規格によって送信速度が変わるため、Ethernet規格によって時間が異なることに注意
96bit分の時間に、次のフレームが送信する準備をする


# Ethernet規格
- インタフェース：論理的・物理的な接点
- ポート：ケーブルを接続する具体的な口

規格は通信する物どうしで揃える必要あり
規格名は、通信速度/通信方式/ケーブル種類
※Gありはギガ
※Tはツイストペア、それ以外は光ファイバー

通信速度：一定時間にインタフェースから送り出せるデータ量のこと
※２点間を移動するスピードではない！


# 通信モード
２点間の通信について
全二重通信(Full Duplex)：ふたつの端末が同時に送受信できる
半二重(Half Duplex)：相手が送受信していない時に送受信する

Auto Negotiation：2点間でduplexを揃える必要があるが、それを自動に設定すること
※不一致でも通信ができてしまうことに注意


# 通信速度と互換性
1000Base-T/100Base-TX/10Base-T
→新しい規格が出るたびに対応する機器を買わなくていいようにこの三つには互換性がある


# ケーブル種類
同軸ケーブル・ツイストケーブル・光ファイバーケーブルを使う

ツイストペアケーブル：導線をねじりながら、４組みのペアで行うもの　
STP(Shielded Twisted Pair)：ノイズ対策で保護
UTP(Unshielded Twister Pair)：保護はないが、こっちのほうが多く使われる
※通信速度が上がれば、上位カテゴリーのケーブルを使う必要がある

ストレートケーブル/クロスオーバーケーブル
ストレートケーブル：内部ピンの両端が同じピン番号になる
クロスオーバーケーブル：内部ピンの両端がクロスしたピン番号になる
※二つがある理由→各ホストのピン配列には二つのパターン(MDI/MDI-X)があり違う配列同士の場合は、クロスオーバーケーブルで接続する

最近は使用ケーブルによりMDI/MDI-Xを機器側で変更する：Auto MDI/MDI-X

光ファイバーケーブル
Single Mode Fiber(SMF)
→長距離向け、高価
Multi Mode Fiber(MMF)：光の進み方が複数ある
→短距離向け、安価
→ガラスで反射しながら光が進む

※光ファイバーケーブルは、ツイストペアケーブルに比べ、折り曲げに弱いが、距離の制限や運べる情報量の多さ、ノイズ耐性で強い


# コネクタ種類
ツイストペアケーブルはRJ-45(Registered Jack 45)
光ファイバーケーブルはSC(Square-shaped Connector)/LC(Local Connector)


# インターフェースモジュール
RJ45をギガ対応の光ファイバーを接続可能にするもの
Gigabit Interface Converter(GBIC)
Small Form-factor Pluggable(SFP)：SFP Plusでは10Gbitに対応

# CSMA/CD
昔は同軸ケーブルを使っていた
→受信用と送信用に同じケーブルを使っていた
→複数端末が同時に送信することで、衝突が発生することがあった
他のホストが送信しているときは送信しない

Carrier Sense Multiple Access(CSMA)：ホストは送信前に他の通信状態を確認
Collision Detection(CD)：衝突を検出したらランダムな時間待機して再送

**現在はスイッチを使った構成が一般的で、全二重通信ができるため、データの衝突はおこらない**